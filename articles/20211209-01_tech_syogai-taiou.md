---
title: "障害対応事始め（仮）"
emoji: "🕵"
type: "tech"
topics: ["障害対応", "心得"]
published: false
---
皆さんは障害対応はお好きですか？

迷いなく「はい」と答えられる人は少ないのではないかなと感じています。
私は好きですが、好きでないエンジニアのほうが多いような気がしています。
過去、他人の障害対応のやり方を見ていると、好きではないんだなと思える人は幾人かいました。

* 何から調べてよいやら検討がついていない
* 表層的な事実だけを見て諦める
* 間違った障害報告を行って周囲を混乱状態に貶める

こういったエンジニアの方たちは確実に障害対応は好きではないことでしょう。

ただ、障害対応ははっきりと申しまして慣れだと思っております。
経験を積めばある程度慣れますし、障害の真因を導き出せる可能性も上がります。

しかしながら、間違った方法論を武器に障害と戦っても、いつまでも障害の真因を導き出せる可能性は上がりませんし、ましてや成功体験がないのですから好きという感情を一生知ることはないでしょう。
そこで、障害と戦う際の正しい方法論[^1]をお伝えしたいなと思います。

[^1]: と、私が思っているだけの個人的な方法論ですが・・・

# ■個人的に大切にしている10箇条
（10個もあるのかよ～、とか言わないの！）

## １．事実の積み重ね
一番重要なことだと思っています。

障害対応の際に一番してはいけないことは**主観と客観的事実を混同して共有すること**です。
主観と客観的事実を混同すると、再現性がなくなる可能性があるからです。

障害対応に際して重要視されているポイントとして再現性があります。
再現性とは簡単に言うと、同一条件下においては何回やってもその事象は必ず発生するということです。
つまり、そこに主観や憶測・勝手な思い込みが紛れ込んでしまうと、再現するはずのものも再現しなくなる可能性があります。

例えばありがちなものとして、過去に同様の障害が起こったときにあのシステムが悪かったから**今回も同様だと思い込み、そのまま報告**してしまうことです。
個人の思い込みだけで先走ってしまっています。

あのシステムが悪いかもしれないと思い真っ先に調査する、等が正しい対応になります。
過去の障害を参考にすること自体は何も悪いことではありませんが、客観的事実を無視することは悪です。

**大事なことは事実を事実として認識し、主観的な内容は事実に変わるまで意見として伝えるべきです。**

## ２．小説を読むより、漫画やアニメを見るほうが一目瞭然じゃないですか？
この業界にいると、構成図なる存在を1度は目にしたことがあるでしょう。
障害のときこそ構成図を真っ先に出してください。

何が起こっているか認識したら次にすべきことは、障害が発生ししているシステム周辺の構成図を取り出すことです。
もしも構成図が存在しない[^2]のなら、手書きの図でも構いません。

タイトルを回収するために話は少し変わりますが、小説よりも漫画、漫画よりもアニメやドラマの方が内容の理解は素早いと思います。
文章だとどうしても頭の中で思い描くという動作をしなければならない以上、思考が必要になります。
であれば、絵に吹き出しがついている漫画、更には登場人物が喋って様子を演じているアニメやドラマのほうが現実味があり、思考なくシームレスに内容が頭の中に入ってきます。

障害中は文章で伝えられた内容等に対しての余計な思考はムダだと思います。
なぜなら、もっと他に考えるべきことがたくさんあるからです。
ですから、そういったムダ削減のためにも構成図という「一目瞭然化されたツール」を準備しておくべきなのです。

また、他人に伝える際は手書きでも絵で伝えたほうが良いと思います。
特に、ネットワーク障害時等に威力を発揮します。
どこの経路がダメになっているか一目瞭然に伝えられますからね。

色々述べましたが、**一目瞭然性は障害解決までの時間短縮に寄与する**のです。

[^2]: 構成図が存在しないなら、今すぐあなたが作るべきです。

## ３．事件現場に登場人物は全員お揃いですか？
これは、名探偵コナンにおいてコナン君が事件を解決するシーンのようなお話です。
はい、話が見えませんね。
真面目にやります。

障害発生時には障害を起こしたと思われる機器やミドルウェア、アプリケーションを俯瞰できる必要があります。
その中の誰かが犯人だと言い切れる状態にしなければ、障害の解決には遠く及びません。
全く予想外のシステムが障害点だったとなると、障害の真因を導き出すまでにかなりの時間を要することになります。
理由については後述します。

なので、障害発生時にはその障害を発生させたと思われるシステム（登場人物）を全て揃えなければならないのです。
（極稀に揃わないこともあります。）

## ４．そのエラーは誰が？
表面的なエラーの検知は基本的に何らかの監視ツールが行っていることでしょう。


## ５．あの日使ったツールの使い方を僕達はまだ知らない。
## ６．犯人を追い詰めるときは考えて追い詰めるべし
## ７．ログ多くして障害解決への道筋は遠ざかる
## ８．略語の多様はご法度です（意思疎通できていますか？）
## ９．知らない用語は調べよう（知ったかは危険）
## １０．共有も障害対応です

# ■開発者向け
## 設計ミスとバグの境界線上で
## 非機能要件をバカにしてはいけない（戒め）

# ■インフラ向け
## もう、輻輳って便利な言葉に騙されない
## アプリ屋さんと連携したほうがきっとうまくいく

# ■おまけ
宇宙から怪電波を受信した！
特異バグのお話
焦りこそ最大のトラップだったな、松田・・・

# 最後に

## 参考資料

https://qiita.com/zaru/items/edb49d8d2a2a6981789a
https://logmi.jp/tech/articles/321458
https://logmi.jp/tech/articles/321462
https://www.njg.co.jp/column/column-28580/
https://ja.wikipedia.org/wiki/%E7%89%B9%E7%95%B0%E3%81%AA%E3%83%90%E3%82%B0
